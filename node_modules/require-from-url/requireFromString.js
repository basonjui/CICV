var path = require("path");

function requireFromString(code, filename) {
    var Module = module.constructor;
    var m = new Module(filename, module.parent);
    m.filename = filename;
    m.paths = Module._nodeModulePaths(path.dirname(filename));
    m._compile(code, filename);
    return m.exports;
}

module.exports = requireFromString;
